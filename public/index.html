<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>DioRise â€¢ Hytale</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0f1b1f; --bg2:#0b1418;
  --panel:#1f343a; --panel2:#17292e;
  --line:#2e555f; --accent:#4da3ff;
  --gold:#e8c15a; --text:#e3f4f6;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  margin:0;
  background:
    radial-gradient(900px 500px at 10% -10%,#2f5f67,transparent),
    radial-gradient(700px 400px at 90% 10%,#2f6f5c,transparent),
    linear-gradient(180deg,var(--bg),var(--bg2));
  color:var(--text);
}

/* LOGIN */
#login{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:1000}
#loginBox{background:linear-gradient(180deg,var(--panel),var(--panel2));padding:20px;border-radius:16px;width:280px}
#loginBox input{width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px}

/* HEADER */
.header{display:flex;justify-content:space-between;padding:12px 18px;background:#182d32;border-bottom:1px solid var(--line);font-weight:700}

/* LEVEL */
.levelbar{padding:10px 18px;background:#0c191d}
.bar{height:12px;background:#081417;border-radius:6px;overflow:hidden}
.bar span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#6fb3aa)}

/* LAYOUT */
.app{display:grid;grid-template-columns:260px 1fr 260px;gap:16px;padding:16px}
.panel{background:linear-gradient(180deg,var(--panel),var(--panel2));border-radius:16px;padding:12px;border:1px solid #203f45}
.item{display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,.25);padding:8px 10px;border-radius:10px;margin-bottom:8px}

/* CENTER */
.center{display:flex;flex-direction:column;align-items:center;gap:16px}
.core{width:240px;height:240px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#a7d7cf,#4e9f95);box-shadow:0 0 40px rgba(143,209,199,.7);display:flex;align-items:center;justify-content:center;font-size:54px}
.main-btn{background:linear-gradient(180deg,#4da3ff,#2f6fd4);color:#fff;padding:18px 60px;font-size:28px;border-radius:32px;border:none;font-weight:900;cursor:pointer}

/* BUTTON */
button{background:#f1f5f9;border:none;border-radius:8px;font-weight:800;padding:6px 14px;cursor:pointer}

/* BOTTOM */
.bottom{position:fixed;left:0;right:0;bottom:0;background:#13262b;border-top:1px solid var(--line);padding:8px;display:flex;justify-content:space-between;align-items:center}
.bottom-left{display:flex;gap:10px}

/* LEADERS */
#leaders{position:fixed;right:10px;bottom:60px;width:260px;background:linear-gradient(180deg,var(--panel),var(--panel2));border-radius:14px;border:1px solid #203f45;padding:10px;display:none}
#leaders.active{display:block}

/* FLOAT */
.float{position:absolute;color:var(--gold);font-weight:900;pointer-events:none;animation:float 1s forwards}
@keyframes float{to{transform:translateY(-50px);opacity:0}}
</style>
</head>

<body>

<div id="login">
  <div id="loginBox">
    <h3>Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ¸Ğº</h3>
    <input id="nickInput" placeholder="Ğ’Ğ°Ñˆ Ğ½Ğ¸Ğº">
    <button onclick="startGame()">Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</button>
  </div>
</div>

<div class="header">
  <div>DioRise â€¢ Hytale â€” <span id="nickLabel"></span></div>
  <div>ğŸ’° <span id="gold">0</span> â­ <span id="level">1</span></div>
</div>

<div class="levelbar">
  Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ <span id="lvlText">1</span> â€¢ Ğ‘Ğ¾Ğ½ÑƒÑ <span id="lvlBonus">+0%</span>
  <div class="bar"><span id="xpBar"></span></div>
</div>

<div class="app">

<div class="panel">
<h4>Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸</h4>
<div class="item">ğŸ’ª Ğ¡Ğ¸Ğ»Ğ° <button onclick="upStat('str')">ğŸ’° <span id="c_str"></span></button></div>
<div class="item">âš¡ Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ <button onclick="upStat('agi')">ğŸ’° <span id="c_agi"></span></button></div>
<div class="item">ğŸ§  Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ <button onclick="upStat('int')">ğŸ’° <span id="c_int"></span></button></div>
<div class="item">ğŸ€ Ğ£Ğ´Ğ°Ñ‡Ğ° <button onclick="upStat('luck')">ğŸ’° <span id="c_luck"></span></button></div>
</div>

<div class="center">
  <div class="core">ğŸ’</div>
  <button class="main-btn" id="hitBtn">Ğ£Ğ”ĞĞ </button>
</div>

<div class="panel">
<h4>ĞĞ²Ñ‚Ğ¾Ğ´Ğ¾Ğ±Ñ‹Ñ‡Ğ°</h4>
<div class="item">Ğ“Ğ¾Ğ±Ğ»Ğ¸Ğ½ +1 <button onclick="buyAuto(1)">ğŸ’° <span id="c_a1"></span></button></div>
<div class="item">Ğ Ñ‹Ñ†Ğ°Ñ€ÑŒ +5 <button onclick="buyAuto(5)">ğŸ’° <span id="c_a5"></span></button></div>
</div>

</div>

<div class="bottom">
  <div class="bottom-left">
    <div class="item">ĞšĞ»Ğ¸Ğº +1 <button onclick="buyClick()">ğŸ’° <span id="c_click"></span></button></div>
    <div class="item">Ğ‘ÑƒÑÑ‚ +20% <button onclick="buyBoost()">ğŸ’° <span id="c_boost"></span></button></div>
    <div class="item">Ğ¡ÑƒĞ½Ğ´ÑƒĞº <button onclick="openChest()">ğŸ’° <span id="c_chest"></span></button></div>
  </div>
  <button onclick="toggleLeaders()">ğŸ† Ğ›Ğ¸Ğ´ĞµÑ€Ñ‹</button>
</div>

<div id="leaders">
  <h4>ğŸ† Ğ›Ğ¸Ğ´ĞµÑ€Ñ‹</h4>
  <div id="leadersList"></div>
</div>

<script>
/* ========= DEFAULT STATE ========= */
const DEFAULT_STATE = {
  gold:0, level:1, xp:0, xpNeed:100, perSec:0,
  stats:{str:1,agi:1,int:1,luck:1},
  prices:{str:70,agi:70,int:70,luck:90,auto1:250,auto5:1200,click:300,boost:800,chest:200}
};

let nick=null;
let state=JSON.parse(JSON.stringify(DEFAULT_STATE));
const LEADERS_KEY="diorise_leaders";

/* ========= LOGIN ========= */
function startGame(){
  const n=nickInput.value.trim();
  if(!n) return;
  nick=n;
  nickLabel.textContent=nick;
  login.style.display="none";
  safeLoad();
  render();
}

/* ========= SAVE / LOAD ========= */
const saveKey=()=>`diorise_${nick}`;
function safeLoad(){
  const raw=localStorage.getItem(saveKey());
  if(!raw) return;
  try{
    const d=JSON.parse(raw);
    state={...DEFAULT_STATE,...d,
      stats:{...DEFAULT_STATE.stats,...d.stats},
      prices:{...DEFAULT_STATE.prices,...d.prices}
    };
  }catch{}
}
function save(){
  localStorage.setItem(saveKey(),JSON.stringify(state));
  const lb=JSON.parse(localStorage.getItem(LEADERS_KEY)||"{}");
  lb[nick]={gold:state.gold,level:state.level};
  localStorage.setItem(LEADERS_KEY,JSON.stringify(lb));
}

/* ========= RENDER ========= */
const bonus=()=>1+(state.level-1)*0.03;
function render(){
  gold.textContent=Math.floor(state.gold);
  level.textContent=state.level;
  lvlText.textContent=state.level;
  lvlBonus.textContent="+"+Math.round((bonus()-1)*100)+"%";
  xpBar.style.width=Math.min(100,(state.xp/state.xpNeed*100))+"%";

  c_str.textContent=Math.floor(state.prices.str);
  c_agi.textContent=Math.floor(state.prices.agi);
  c_int.textContent=Math.floor(state.prices.int);
  c_luck.textContent=Math.floor(state.prices.luck);
  c_a1.textContent=Math.floor(state.prices.auto1);
  c_a5.textContent=Math.floor(state.prices.auto5);
  c_click.textContent=Math.floor(state.prices.click);
  c_boost.textContent=Math.floor(state.prices.boost);
  c_chest.textContent=Math.floor(state.prices.chest);

  save();
}

/* ========= GAMEPLAY ========= */
function gainXP(v){
  state.xp+=v;
  while(state.xp>=state.xpNeed){
    state.xp-=state.xpNeed;
    state.level++;
    state.xpNeed=Math.floor(state.xpNeed*1.5);
  }
}
hitBtn.onclick=(e)=>{
  const gain=(state.stats.str*2)*(1+state.stats.luck*0.02)*bonus();
  state.gold+=gain;
  gainXP(5+state.stats.int);
  spawn(e.clientX,e.clientY,"+"+Math.floor(gain));
  render();
};

function upStat(s){if(state.gold<state.prices[s])return;state.gold-=state.prices[s];state.stats[s]++;state.prices[s]*=1.4;render();}
function buyAuto(v){const k=v===1?"auto1":"auto5";if(state.gold<state.prices[k])return;state.gold-=state.prices[k];state.perSec+=v*(1+state.stats.agi*0.05);state.prices[k]*=1.9;render();}
function buyClick(){if(state.gold<state.prices.click)return;state.gold-=state.prices.click;state.stats.str++;state.prices.click*=1.6;render();}
function buyBoost(){if(state.gold<state.prices.boost)return;state.gold-=state.prices.boost;state.stats.int++;state.prices.boost*=1.7;render();}
function openChest(){if(state.gold<state.prices.chest)return;state.gold-=state.prices.chest;const r=100+Math.random()*250;state.gold+=r;gainXP(30);state.prices.chest*=1.6;render();}

/* ========= LEADERS ========= */
function toggleLeaders(){leaders.classList.toggle("active");renderLeaders();}
function renderLeaders(){
  const lb=JSON.parse(localStorage.getItem(LEADERS_KEY)||"{}");
  leadersList.innerHTML=Object.entries(lb)
    .sort((a,b)=>b[1].gold-a[1].gold)
    .slice(0,10)
    .map((e,i)=>`${i+1}. ${e[0]} â€” ğŸ’° ${Math.floor(e[1].gold)} | â­ ${e[1].level}`)
    .join("<br>")||"ĞŸÑƒÑÑ‚Ğ¾";
}

/* ========= PASSIVE ========= */
setInterval(()=>{
  if(!nick) return;
  if(state.perSec>0){
    state.gold+=state.perSec*bonus();
    gainXP(2);
    render();
  }
},1000);

/* ========= FLOAT ========= */
function spawn(x,y,t){
  const f=document.createElement("div");
  f.className="float";
  f.style.left=x+"px"; f.style.top=y+"px";
  f.textContent=t;
  document.body.appendChild(f);
  setTimeout(()=>f.remove(),1000);
}
</script>
</body>
</html>